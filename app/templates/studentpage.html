<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ALUMNI NEXUS - Student Portal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg-1: #f6fbff;
  --bg-2: #eef8ff;
  --accent-1: #6aa7ff;
  --accent-2: #83e3ff;
  --heading: #0b3d66;
  --muted: #6b7280;
  --success: #10b981;
  --warning: #f59e0b;
}
body{
  margin:0;
  font-family:'Inter',sans-serif;
  background:
    radial-gradient(circle at 10% 8%, rgba(131,227,255,0.12), transparent 18%),
    linear-gradient(180deg,var(--bg-1) 0%, var(--bg-2) 100%);
  color:var(--heading);
  -webkit-font-smoothing: antialiased;
}
/* === Top navigation === */
header{
  background:rgba(255,255,255,0.85);
  backdrop-filter:blur(10px);
  padding:12px 30px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  position:sticky;
  top:0;
  z-index:100;
  border-bottom: 1px solid rgba(130,200,255,0.22);
}
header h1{margin:0;font-size:20px;}
nav a{
  margin-left:20px;
  text-decoration:none;
  color:var(--heading);
  font-weight:600;
  transition:color .2s;
}
nav a:hover{color:var(--accent-1);}
.icon-btn{
  cursor:pointer;font-size:24px;background:#fff;color:var(--heading);
  border-radius:50%;width:40px;height:40px;
  display:flex;align-items:center;justify-content:center;
  box-shadow:0 8px 20px rgba(100,160,220,0.1);
  border:1px solid rgba(100,180,255,0.25);
  transition: transform .2s ease, box-shadow .2s ease;
}
.icon-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 25px rgba(100,160,220,0.15);
}
/* Hero */
.hero{text-align:center;padding:60px 20px 30px;}
.hero h2{margin:0;font-size:2.2rem;color:var(--heading);}
.hero p{margin-top:10px;color:var(--muted);font-size:1.1rem;}
/* Panels & layout */
section{padding:50px 30px;max-width:1200px;margin:0 auto;}
h2{text-align:center;font-size:2rem;margin-bottom:15px;}
p.section-intro{text-align:center;color:var(--muted);max-width:700px;margin:0 auto 30px;}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
  gap:25px;
  margin-top:20px;
}
#groupGrid, .legacy-stats {
  grid-template-columns: repeat(3, 1fr);
}
@media (max-width: 900px) {
  #groupGrid, .legacy-stats {
    grid-template-columns: repeat(2, 1fr);
  }
}
@media (max-width: 600px) {
  #groupGrid, .legacy-stats {
    grid-template-columns: 1fr;
  }
}
.card{
  background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(235,249,255,0.95));
  box-shadow:
    0 30px 60px rgba(30,90,140,0.08),
    0 10px 30px rgba(30,90,140,0.06);
  border: 1px solid rgba(130,200,255,0.22);
  border-radius:18px;
  padding:22px;
  text-align:center;
  transition: transform .28s ease, box-shadow .28s ease;
}
.card:hover{
  transform: translateY(-8px);
  box-shadow:
    0 60px 100px rgba(30,90,140,0.10),
    0 20px 50px rgba(30,90,140,0.08);
}
.action-btn, .tab-btn {
  border:none;
  background:var(--accent-1);
  color:#fff;
  font-weight:600;
  cursor:pointer;
  transition: transform .2s ease, box-shadow .2s ease, background .2s ease;
  box-shadow: 0 4px 12px rgba(106, 167, 255, 0.25);
}
.action-btn:hover, .tab-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 18px rgba(106, 167, 255, 0.3);
}
.action-btn{ margin-top:12px; padding:10px 20px; border-radius: 10px; }
.tab-btn{ padding:8px 18px; border-radius: 20px; }
.action-btn.joined{background:var(--heading)!important;}
.action-btn.connected{background:var(--success)!important;}
.tab-btn.active{background:var(--heading);}

.top-search{
  display:flex;
  justify-content:center;
  padding:20px;
  gap:10px;
  flex-wrap:wrap;
}
.top-search input{
  padding:12px 16px;
  border:1px solid rgba(130,200,255,0.22);
  border-radius:10px;width:320px;
  box-shadow: 0 10px 30px rgba(30,90,140,0.06);
  transition: box-shadow .2s ease, border-color .2s ease;
  font-size:16px;
}
.top-search input:focus {
  outline: none;
  border-color: var(--accent-1);
  box-shadow: 0 10px 30px rgba(30,90,140,0.08), 0 0 0 3px rgba(106, 167, 255, 0.3);
}
.search-btn{
  padding:12px 20px;
  background:var(--accent-1);
  color:white;
  border:none;
  border-radius:10px;
  font-weight:600;
  cursor:pointer;
  transition: all .2s ease;
}
.search-btn:hover{
  background:#5a9aff;
  transform:translateY(-2px);
}
.tabs{display:flex;justify-content:center;gap:20px;margin-top:20px;}
.legacy-stats{
  display:grid;
  gap:20px;
  margin-top:20px;
}
.legacy-stats .stat h3{margin:0;color:var(--accent-1);font-size:2rem;font-weight:700;}
.legacy-stats .stat p{margin-top:5px;color:var(--muted);font-weight:600;}

/* Alumni Search Results */
.search-results{
  background: rgba(255, 255, 255, 0.9);
  border-radius: 15px;
  margin: 20px 0;
  padding: 20px;
  border: 1px solid rgba(130,200,255,0.22);
  display: none;
}
.search-results.active{
  display: block;
}
.alumni-item{
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px;
  margin: 10px 0;
  background: white;
  border-radius: 10px;
  border: 1px solid rgba(130,200,255,0.15);
  transition: all .2s ease;
}
.alumni-item:hover{
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(30,90,140,0.1);
}
.alumni-info h4{
  margin: 0;
  color: var(--heading);
  font-size: 1.1rem;
}
.alumni-info p{
  margin: 5px 0 0 0;
  color: var(--muted);
  font-size: 0.9rem;
}
.alumni-avatar{
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: linear-gradient(45deg, var(--accent-1), var(--accent-2));
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: white;
  margin-right: 15px;
}
.alumni-details{
  display: flex;
  align-items: center;
  flex: 1;
}
.connect-btn{
  padding: 8px 16px;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: all .2s ease;
  font-size: 0.9rem;
}
.connect-btn.connect{
  background: var(--accent-1);
  color: white;
}
.connect-btn.connected{
  background: var(--success);
  color: white;
}
.connect-btn.connect:hover{
  background: #5a9aff;
  transform: translateY(-1px);
}
.no-results{
  text-align: center;
  color: var(--muted);
  padding: 40px 20px;
  font-style: italic;
}
.counter-pulse {
  animation: pulse 0.6s ease-in-out;
}
@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); color: var(--success); }
  100% { transform: scale(1); }
}
</style>
</head>
<body>

<header>
  <h1>ALUMNI NEXUS</h1>
  <nav>
    <a href="#dashboard">Dashboard</a>
    <a href="#groups">Groups</a>
    <a href="#services">Services</a>
    <a href="#mentorship">Mentorship</a>
    <a href="#events">Events</a>
    <a href="#nostalgia">Nostalgia</a>
    <a href="#legacy">Legacy</a>
    <a href="#findalumni">Find Alumni</a>
  </nav>
  <a href="{{ url_for('student_card', student_id=student_id) }}"><div id="studentIcon" class="icon-btn" title="Student Dashboard">ðŸ‘¤</div></a>
</header>

<div class="hero">
  <h2>Welcome to Alumni Nexus</h2>
  <p>Your one-stop hub for events, mentorship, services and the alumni legacy tree.</p>
</div>

<div class="top-search">
  <input type="text" id="searchBar" placeholder="Search alumni by name, company, or field...">
  <button class="search-btn" onclick="searchAlumni()">Search Alumni</button>
</div>

<!-- Search Results Section -->
<div class="search-results" id="searchResults">
  <h3 style="margin-top:0;">Search Results</h3>
  <div id="alumniList"></div>
</div>

<section id="dashboard">
  <h2>Dashboard</h2>
  <div class="grid">
    <div class="card">
      <h3 id="alumniCount">0</h3>
      <p>Connected Alumni</p>
    </div>
    <div class="card">
      <h3>5</h3>
      <p>Upcoming Events</p>
    </div>
    <div class="card">
      <h3 id="pendingConnections">0</h3>
      <p>Pending Connections</p>
    </div>
  </div>
</section>

<section id="groups">
  <h2>Groups & Cohorts</h2>
  <p class="section-intro">Connect with like-minded peers and alumni.</p>
  <div class="grid" id="groupGrid"></div>
</section>

<section id="services">
  <h2>Services & Skills</h2>
  <p class="section-intro">Apply for programs and track progress.</p>
  <div class="tabs">
    <button class="tab-btn active" data-tab="approved">Approved</button>
    <button class="tab-btn" data-tab="apply">New to Apply</button>
    <button class="tab-btn" data-tab="applied">Applied (Under Process)</button>
  </div>
  <div class="grid" id="serviceGrid"></div>
</section>

<section id="mentorship">
  <h2>Mentorship</h2>
  <div class="grid" id="mentorGrid"></div>
</section>

<section id="events">
  <h2>Events Hub</h2>
  <div class="grid" id="eventGrid"></div>
</section>

<section id="nostalgia">
  <h2>Nostalgia Mode ðŸŽ¶ðŸ“·</h2>
  <p class="section-intro">Step back in time with curated memories.</p>
  <div class="card"><button class="action-btn">Enter Nostalgia</button></div>
</section>

<section id="legacy">
  <h2>Alumni Legacy Tree</h2>
  <p class="section-intro">Visual snapshot of our alumni network.</p>
  <div class="legacy-stats">
    <div class="card stat"><h3>15,000+</h3><p>Total Alumni</p></div>
    <div class="card stat"><h3>45,000+</h3><p>Global Connections</p></div>
    <div class="card stat"><h3>500+</h3><p>Industry Leaders</p></div>
    <div class="card stat"><h3>120+</h3><p>Countries</p></div>
    <div class="card stat"><h3>75%</h3><p>Entrepreneurial Rate</p></div>
    <div class="card stat"><h3>89%</h3><p>Career Growth</p></div>
  </div>
</section>

<section id="findalumni">
  <h2>Find Alumni Near Me</h2>
  <p class="section-intro">Locate and connect with alumni in your vicinity.</p>
  <div class="grid">
    <div class="card">
      <h3>Use My Location</h3>
      <p>Click the button to detect nearby alumni.</p>
      <button class="action-btn" onclick="detectLocation()">Detect Location</button>
      <p id="locationResult" style="margin-top:10px;color:var(--muted);"></p>
    </div>
  </div>
</section>

<script>
// Enhanced Alumni Database
// Enhanced Alumni Database - 63+ Members Total
const allAlumni = [
  // From Alumni Directory Page - All 43 Members
  {name:'Rajesh Patel',batch:'2014',field:'Senior Software Engineer',company:'Google',location:'California',connected:false},
  {name:'Priya Singh',batch:'2017',field:'Product Manager',company:'Microsoft',location:'Seattle',connected:false},
  {name:'Vikram Joshi',batch:'2019',field:'Data Scientist',company:'Netflix',location:'California',connected:false},
  {name:'Sneha Gupta',batch:'2020',field:'UX Designer',company:'Adobe',location:'San Francisco',connected:false},
  {name:'Abhishek Sharma',batch:'2018',field:'Mobile App Developer',company:'Spotify',location:'New York',connected:false},
  {name:'Aditya Bhargava',batch:'2015',field:'Quantitative Analyst',company:'JP Morgan',location:'New York',connected:false},
  {name:'Amit Kumar',batch:'2018',field:'DevOps Engineer',company:'Amazon',location:'Seattle',connected:false},
  {name:'Anita Verma',batch:'2016',field:'Management Consultant',company:'McKinsey',location:'London',connected:false},
  {name:'Rohit Agarwal',batch:'2016',field:'Machine Learning Engineer',company:'Tesla',location:'California',connected:false},
  {name:'Tushar Joshi',batch:'2018',field:'Data Scientist',company:'Netflix',location:'California',connected:false},
  {name:'Kavya Reddy',batch:'2015',field:'Cloud Architect',company:'AWS',location:'Virginia',connected:false},
  {name:'Arjun Malhotra',batch:'2019',field:'Full Stack Developer',company:'Meta',location:'California',connected:false},
  {name:'Deepika Sharma',batch:'2017',field:'Cybersecurity Analyst',company:'IBM',location:'Texas',connected:false},
  {name:'Suyash Kansal',batch:'2018',field:'Project Lead',company:'Google',location:'California',connected:false},
  {name:'Nitin Gupta',batch:'2013',field:'Founder & CEO',company:'TechStart Solutions',location:'Bangalore',connected:false},
  {name:'Simran Kaur',batch:'2014',field:'Co-Founder',company:'EduTech India',location:'Delhi',connected:false},
  {name:'Karan Mehta',batch:'2016',field:'Startup Founder',company:'FinInnovate',location:'Mumbai',connected:false},
  {name:'Ravi Chopra',batch:'2012',field:'Investment Banker',company:'Goldman Sachs',location:'New York',connected:false},
  {name:'Meera Jain',batch:'2015',field:'Strategy Consultant',company:'BCG',location:'Chicago',connected:false},
  {name:'Ashish Kumar',batch:'2013',field:'Portfolio Manager',company:'BlackRock',location:'New York',connected:false},
  {name:'Pooja Bansal',batch:'2016',field:'Mechanical Engineer',company:'Boeing',location:'Seattle',connected:false},
  {name:'Bhavya Gupta',batch:'2018',field:'Full Stack Engineer',company:'Meta',location:'California',connected:false},
  {name:'Vivek Yadav',batch:'2017',field:'Electrical Engineer',company:'Siemens',location:'Munich',connected:false},
  {name:'Ritika Goel',batch:'2018',field:'Civil Engineer',company:'L&T Construction',location:'Mumbai',connected:false},
  {name:'Dr. Anmol Singh',batch:'2014',field:'Biomedical Engineer',company:'Medtronic',location:'Minnesota',connected:false},
  {name:'Nisha Patel',batch:'2015',field:'Research Scientist',company:'Pfizer',location:'New York',connected:false},
  {name:'Prof. Sanjay Verma',batch:'2010',field:'Assistant Professor',company:'IIT Delhi',location:'Delhi',connected:false},
  {name:'Dr. Prerna Gupta',batch:'2016',field:'Research Fellow',company:'MIT',location:'Boston',connected:false},
  {name:'Ankur Jindal',batch:'2011',field:'IAS Officer',company:'Government of India',location:'Delhi',connected:false},
  {name:'Disha Bindra',batch:'2018',field:'Backend Engineer',company:'Amazon',location:'Seattle',connected:false},
  {name:'Swati Khanna',batch:'2017',field:'Policy Analyst',company:'NITI Aayog',location:'Delhi',connected:false},
  {name:'Rahul Bhatia',batch:'2019',field:'Game Developer',company:'Ubisoft',location:'Montreal',connected:false},
  {name:'Aditi Sharma',batch:'2020',field:'UI/UX Designer',company:'Figma',location:'San Francisco',connected:false},
  {name:'Saurabh Thakur',batch:'2018',field:'Data Engineer',company:'Netflix',location:'California',connected:false},
  {name:'Harsh Agarwal',batch:'2021',field:'Software Engineer',company:'Flipkart',location:'Bangalore',connected:false},
  {name:'Ishita Roy',batch:'2022',field:'Data Analyst',company:'Zomato',location:'Delhi',connected:false},
  {name:'Aryan Sethi',batch:'2021',field:'Frontend Developer',company:'Razorpay',location:'Bangalore',connected:false},
  {name:'Tanvi Gupta',batch:'2022',field:'Product Designer',company:'Swiggy',location:'Bangalore',connected:false},
  {name:'Manish Choudhary',batch:'2012',field:'Software Architect',company:'Salesforce',location:'San Francisco',connected:false},
  {name:'Jaskeerat Singh',batch:'2018',field:'Frontend Engineer',company:'Netflix',location:'California',connected:false},
  {name:'Shreya Kapoor',batch:'2016',field:'Senior Engineer',company:'Uber',location:'San Francisco',connected:false},
  {name:'Varun Khanna',batch:'2015',field:'AI Researcher',company:'OpenAI',location:'California',connected:false},
  {name:'Preeti Malhotra',batch:'2013',field:'Staff Engineer',company:'Airbnb',location:'California',connected:false},
  {name:'Sanjana Reddy',batch:'2019',field:'Product Marketing Manager',company:'Stripe',location:'California',connected:false},
  {name:'Aman Gupta',batch:'2020',field:'iOS Developer',company:'Apple',location:'California',connected:false},
  {name:'Neha Agarwal',batch:'2017',field:'Data Science Lead',company:'Airbnb',location:'California',connected:false},
  {name:'Rohan Sharma',batch:'2016',field:'Security Engineer',company:'Cloudflare',location:'Texas',connected:false},
  {name:'Priyanka Jain',batch:'2021',field:'Backend Developer',company:'Razorpay',location:'Bangalore',connected:false},
  {name:'Kunal Singh',batch:'2015',field:'VP Engineering',company:'Paytm',location:'Noida',connected:false},
  {name:'Divya Kapoor',batch:'2019',field:'UX Researcher',company:'Spotify',location:'Stockholm',connected:false},
  {name:'Rahul Verma',batch:'2014',field:'Site Reliability Engineer',company:'YouTube',location:'California',connected:false},
  {name:'Sakshi Bhatt',batch:'2020',field:'Machine Learning Engineer',company:'Uber',location:'California',connected:false},
  {name:'Arun Kumar',batch:'2018',field:'DevOps Lead',company:'Flipkart',location:'Bangalore',connected:false},
  {name:'Megha Thakur',batch:'2017',field:'Product Owner',company:'Zomato',location:'Delhi',connected:false},
  {name:'Vishal Pandey',batch:'2016',field:'Tech Lead',company:'PhonePe',location:'Bangalore',connected:false},
  {name:'Riya Gupta',batch:'2021',field:'Frontend Engineer',company:'Myntra',location:'Bangalore',connected:false},
  {name:'Kartik Mehta',batch:'2019',field:'Full Stack Developer',company:'Ola',location:'Bangalore',connected:false},
  {name:'Anjali Singh',batch:'2018',field:'QA Engineer',company:'Swiggy',location:'Bangalore',connected:false},
  {name:'Mohit Sharma',batch:'2015',field:'Engineering Manager',company:'CRED',location:'Bangalore',connected:false},
  {name:'Tanya Joshi',batch:'2020',field:'Data Analyst',company:'Dream11',location:'Mumbai',connected:false},
  {name:'Akash Patel',batch:'2017',field:'Mobile Developer',company:'Byju\'s',location:'Bangalore',connected:false},
  {name:'Isha Agarwal',batch:'2019',field:'Product Designer',company:'Unacademy',location:'Bangalore',connected:false},
  {name:'Nikhil Gupta',batch:'2016',field:'Backend Architect',company:'Grofers',location:'Delhi',connected:false}
];

// Initialize displayed alumni (subset for mentorship section)
const alumni = allAlumni.slice(0,3);

const events=[
  {title:'Annual Alumni Meet',desc:'Reconnect with seniors'},
  {title:'AI Tech Summit',desc:'Discuss AI breakthroughs'},
  {title:'Sports Fest',desc:'Friendly competitions'}
];
const groups=[
  'Fintech Innovators','Tech Entrepreneurs','Open Source Crew',
  'Global Alumni Network','Women in Tech','Startup Mentors'
];
const services={
  approved:[
    {title:'Data Analytics Internship',desc:'Alumni Board approved'},
    {title:'Cloud Pro Certificate',desc:'Industry validated'}
  ],
  apply:[
    {title:'Startup Bootcamp',desc:'Entrepreneurship skills'},
    {title:'UI/UX Workshop',desc:'Design mentoring'},
    {title:'AI Research Lab',desc:'Cutting-edge research'}
  ],
  applied:[
    {title:'Cloud Training',desc:'Azure & AWS basics â€“ under review'},
    {title:'Cybersecurity Intensive',desc:'Pending approval'}
  ]
};

let connectedCount = 0;
let pendingCount = 0;

function updateCounters() {
  document.getElementById('alumniCount').textContent = connectedCount;
  document.getElementById('pendingConnections').textContent = pendingCount;
}

function connectToAlumni(alumniIndex) {
  const alumni = allAlumni[alumniIndex];
  if (!alumni.connected) {
    alumni.connected = true;
    connectedCount++;
    
    // Add visual feedback
    const countElement = document.getElementById('alumniCount');
    countElement.classList.add('counter-pulse');
    setTimeout(() => countElement.classList.remove('counter-pulse'), 600);
    
    updateCounters();
    
    // Update the button
    const button = document.querySelector(`[data-alumni-index="${alumniIndex}"]`);
    if (button) {
      button.textContent = 'Connected âœ“';
      button.className = 'connect-btn connected';
      button.disabled = true;
    }
    
    // Show success message (optional)
    showNotification(`Connected with ${alumni.name}!`);
  }
}

function showNotification(message) {
  // Create a temporary notification
  const notification = document.createElement('div');
  notification.textContent = message;
  notification.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    background: var(--success);
    color: white;
    padding: 12px 20px;
    border-radius: 8px;
    z-index: 1000;
    animation: slideInRight 0.3s ease;
  `;
  document.body.appendChild(notification);
  
  setTimeout(() => {
    notification.remove();
  }, 3000);
}

function getInitials(name) {
  return name.split(' ').map(n => n[0]).join('').toUpperCase();
}

function searchAlumni() {
  const query = document.getElementById('searchBar').value.toLowerCase().trim();
  const resultsContainer = document.getElementById('searchResults');
  const alumniList = document.getElementById('alumniList');
  
  if (!query) {
    resultsContainer.classList.remove('active');
    return;
  }
  
  // Filter alumni based on search query
  const filteredAlumni = allAlumni.filter(alumni => 
    alumni.name.toLowerCase().includes(query) ||
    alumni.field.toLowerCase().includes(query) ||
    alumni.company.toLowerCase().includes(query) ||
    alumni.batch.includes(query)
  );
  
  // Clear previous results
  alumniList.innerHTML = '';
  
  if (filteredAlumni.length === 0) {
    alumniList.innerHTML = '<div class="no-results">No alumni found matching your search.</div>';
  } else {
    filteredAlumni.forEach((alumni, index) => {
      const globalIndex = allAlumni.findIndex(a => a.name === alumni.name);
      const alumniItem = document.createElement('div');
      alumniItem.className = 'alumni-item';
      alumniItem.innerHTML = `
        <div class="alumni-details">
          <div class="alumni-avatar">${getInitials(alumni.name)}</div>
          <div class="alumni-info">
            <h4>${alumni.name}</h4>
            <p>${alumni.field} at ${alumni.company}</p>
            <p>Batch ${alumni.batch} â€¢ ${alumni.location}</p>
          </div>
        </div>
        <button 
          class="connect-btn ${alumni.connected ? 'connected' : 'connect'}" 
          data-alumni-index="${globalIndex}"
          onclick="connectToAlumni(${globalIndex})"
          ${alumni.connected ? 'disabled' : ''}
        >
          ${alumni.connected ? 'Connected âœ“' : 'Connect'}
        </button>
      `;
      alumniList.appendChild(alumniItem);
    });
  }
  
  resultsContainer.classList.add('active');
}

// Enhanced search with Enter key support
document.getElementById('searchBar').addEventListener('keypress', function(e) {
  if (e.key === 'Enter') {
    searchAlumni();
  }
});

// Real-time search as user types (optional)
document.getElementById('searchBar').addEventListener('input', function() {
  const query = this.value.toLowerCase().trim();
  if (query.length >= 2) {
    searchAlumni();
  } else if (query.length === 0) {
    document.getElementById('searchResults').classList.remove('active');
  }
});

function render(){
  updateCounters();
  
  // Groups
  const gg = document.getElementById('groupGrid');
  groups.forEach(g => {
    const d = document.createElement('div');
    d.className = 'card';
    d.innerHTML = `
      <h3>${g}</h3>
      <p>Join conversations & activities</p>
      <button class="action-btn">View</button>
    `;
    // attach event after button is added
    d.querySelector('button').addEventListener('click', () => {
      window.location.href = "{{ url_for('fintech_stud') }}";
    });
    gg.appendChild(d);
  });

  // Events
  const eg = document.getElementById('eventGrid');
  events.forEach(ev => {
    const div = document.createElement('div');
    div.className = 'card';
    div.innerHTML = `
      <h3>${ev.title}</h3>
      <p>${ev.desc}</p>
      <button class="action-btn">View</button>
    `;
    div.querySelector('button').addEventListener('click', () => {
      window.location.href ="{{ url_for('fintech_stud') }}";
    });
    eg.appendChild(div);
  });

  // Mentors (showing limited alumni for mentorship section)
  const mg = document.getElementById('mentorGrid');
  alumni.forEach(a => {
    const d = document.createElement('div');
    d.className = 'card';
    d.innerHTML = `
      <h3>${a.name}</h3>
      <p>Batch ${a.batch}<br>${a.field}</p>
      <button class="action-btn">Request Mentorship</button>
    `;
    d.querySelector('button').addEventListener('click', () => {
      window.location.href = "{{ url_for('fintech_stud') }}";
    });
    mg.appendChild(d);
  });

  loadServices('approved');
}

render();

function loadServices(tab){
  const sg=document.getElementById('serviceGrid');
  sg.innerHTML='';
  services[tab].forEach(s=>{
    const d=document.createElement('div');
    d.className='card';
    d.innerHTML=`<h3>${s.title}</h3><p>${s.desc}</p><button class="action-btn">View</button>`;
    sg.appendChild(d);
  });
}

document.querySelectorAll('.tab-btn').forEach(btn=>{
  btn.onclick=()=>{
    document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    loadServices(btn.dataset.tab);
  };
});

document.addEventListener('click',e=>{
  if(e.target.classList.contains('action-btn') && !e.target.hasAttribute('data-alumni-index')){
    const originalText = e.target.textContent;
    if (!e.target.classList.contains('joined')) {
      e.target.classList.add('joined');
      if (originalText.includes('Request')) {
        e.target.textContent = 'Requested';
        pendingCount++;
        updateCounters();
      } else if (originalText.includes('Apply')) {
        e.target.textContent = 'Applied';
      } else if (originalText.includes('Enter')) {
        e.target.textContent = 'Exploring...';
      } else {
        e.target.textContent = 'Joined';
      }
    }
  }
});

// Simple geolocation placeholder
function detectLocation(){
  if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(pos=>{
      const {latitude,longitude}=pos.coords;
      document.getElementById('locationResult').textContent=
        `Your location detected: Lat ${latitude.toFixed(4)}, Lon ${longitude.toFixed(4)}. (Integrate with map API for nearby alumni.)`;
    },()=>{document.getElementById('locationResult').textContent='Location access denied.';});
  } else {
    document.getElementById('locationResult').textContent='Geolocation not supported.';
  }
}

// Add CSS for slide-in animation
const style = document.createElement('style');
style.textContent = `
  @keyframes slideInRight {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }
`;
document.head.appendChild(style);
</script>
</body>
</html>